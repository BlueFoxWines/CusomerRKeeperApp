(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21e6fb"],{d60c:function(e,t,n){"use strict";n.r(t);var o=n("7a23"),i={class:"hero is-fullheight"},a={class:"hero-body"},c={class:"container"},r=Object(o["j"])("div",{class:"columns is-flex is-centered"},[Object(o["j"])("figure",{class:"logo image"},[Object(o["j"])("img",{src:"assets/logo/logo_full_bright.svg"})])],-1),s={class:"control"},l={class:"control"},u={type:"submit",class:"button is-theme is-fullwidth"},d={class:"control"},b={class:"control"};function h(e,t,n,h,j,O){var m=Object(o["F"])("Field"),f=Object(o["F"])("Form"),g=Object(o["F"])("ion-content"),v=Object(o["F"])("loading"),p=Object(o["F"])("ion-page"),y=Object(o["G"])("maska");return Object(o["x"])(),Object(o["g"])(p,null,{default:Object(o["O"])((function(){return[Object(o["j"])(g,{fullscreen:!0},{default:Object(o["O"])((function(){return[Object(o["j"])("section",i,[Object(o["j"])("div",a,[Object(o["j"])("div",c,[r,Object(o["j"])(o["d"],{name:"fade",mode:"out-in"},{default:Object(o["O"])((function(){return[j.CodeSent?(Object(o["x"])(),Object(o["g"])(f,{key:1,class:"form mt-5"},{default:Object(o["O"])((function(){return[Object(o["j"])(m,{modelValue:j.Form.Code,"onUpdate:modelValue":t[4]||(t[4]=function(e){return j.Form.Code=e}),name:"Code",rules:O.validateCode,"validate-on-input":j.ValidationCodeIsEager,as:"div",class:"field",type:"tel"},{default:Object(o["O"])((function(n){var i=n.field,a=n.errors,c=n.errorMessage;return[Object(o["j"])("label",{class:["label",{"has-text-danger":Object.keys(a).length}]},[Object.keys(a).length?(Object(o["x"])(),Object(o["g"])(o["a"],{key:0},[Object(o["i"])(Object(o["J"])(c),1)],64)):(Object(o["x"])(),Object(o["g"])(o["a"],{key:1},[Object(o["i"])(Object(o["J"])(e.$t("Interface.Auth.Login.Code.Label")),1)],64))],2),Object(o["j"])("div",d,[Object(o["P"])(Object(o["j"])("input",Object(o["p"])(i,{class:["input",{"is-danger":Object.keys(a).length}],type:"tel",style:{"text-align":"center"},placeholder:"• • • • • •",autofocus:"",onInput:t[3]||(t[3]=function(e){return O.inputCode()})}),null,16),[[y,"# # # # # #"]])])]})),_:1},8,["modelValue","rules","validate-on-input"]),Object(o["j"])("div",b,[Object(o["j"])("button",{type:"submit",class:"button is-theme is-outlined is-fullwidth",disabled:!e.Timeover,onClick:t[5]||(t[5]=function(){return O.resend&&O.resend.apply(O,arguments)})},[e.Timeover?(Object(o["x"])(),Object(o["g"])(o["a"],{key:0},[Object(o["i"])(Object(o["J"])(e.$t("Interface.Auth.Login.Button.ResendCode")),1)],64)):(Object(o["x"])(),Object(o["g"])(o["a"],{key:1},[Object(o["i"])(Object(o["J"])(e.$t("Interface.Auth.Login.Button.ResendTimer"))+" "+Object(o["J"])(e.TimeoutBeauty),1)],64))],8,["disabled"])])]})),_:1})):(Object(o["x"])(),Object(o["g"])(f,{key:0,class:"form mt-5",onSubmit:O.sendcode},{default:Object(o["O"])((function(){return[Object(o["j"])(m,{modelValue:j.Form.Phone,"onUpdate:modelValue":t[2]||(t[2]=function(e){return j.Form.Phone=e}),name:"Phone",rules:O.validatePhone,"validate-on-input":j.ValidationPhoneIsEager,as:"div",class:"field",type:"tel"},{default:Object(o["O"])((function(n){var i=n.field,a=n.errors,c=n.errorMessage;return[Object(o["j"])("label",{class:["label",{"has-text-danger":Object.keys(a).length}]},[Object.keys(a).length?(Object(o["x"])(),Object(o["g"])(o["a"],{key:0},[Object(o["i"])(Object(o["J"])(c),1)],64)):(Object(o["x"])(),Object(o["g"])(o["a"],{key:1},[Object(o["i"])(Object(o["J"])(e.$t("Interface.Auth.Login.Phone.Label")),1)],64))],2),Object(o["j"])("div",s,[Object(o["P"])(Object(o["j"])("input",Object(o["p"])(i,{class:["input",{"is-danger":Object.keys(a).length}],type:"tel",placeholder:e.$t("Interface.Auth.Login.Phone.Placeholder"),onClick:t[1]||(t[1]=function(e){return O.setPhoneValue()})}),null,16,["placeholder"]),[[y,"+7 (###) ###-##-##"]])])]})),_:1},8,["modelValue","rules","validate-on-input"]),Object(o["j"])("div",l,[Object(o["j"])("button",u,Object(o["J"])(e.$t("Interface.Auth.Login.Button.Login")),1)])]})),_:1},8,["onSubmit"]))]})),_:1})])])])]})),_:1}),Object(o["j"])(v,{active:e.IsLoading,"is-full-page":!0},null,8,["active"])]})),_:1})}var j=n("d867"),O=n("7bb1"),m=n("795b"),f=n("2658"),g={data:function(){return{Timeover:!1,Timeout:360,Timer:null}},computed:{TimeoutBeauty:function(){var e=parseInt(this.Timeout,10),t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),o=e-3600*t-60*n;return n<10&&(n="0".concat(n)),o<10&&(o="0".concat(o)),"".concat(n,":").concat(o)}},methods:{decrementTimer:function(){this.Timeout-=1,this.Timeout<=0&&(this.Timeover=!0,clearInterval(this.Timer))},setTimer:function(){this.Timer=setInterval(this.decrementTimer,1e3)},setTimerAgain:function(e){this.Timeover=!1,this.Timeout=e}},beforeUnmount:function(){clearInterval(this.Timer)}},v=n("36cc"),p=n("3a5e"),y=n("d017"),P={name:"Login",components:{IonContent:j["e"],IonPage:j["k"],Field:O["a"],Form:O["b"],Loading:p["a"]},directives:{maska:m["a"]},mixins:[f["a"],g],data:function(){return{Form:{Phone:null,Code:null},ValidationPhoneIsEager:!1,ValidationCodeIsEager:!1,CodeSent:!1}},mounted:function(){this.Timeout=180},methods:{setPhoneValue:function(){this.Form.Phone||(this.Form.Phone="+7")},inputCode:function(){this.Form.Code&&11===this.Form.Code.length&&this.login()},validatePhone:function(e){var t=v["a"].validatePhone(e);return this.ValidationPhoneIsEager=t.eager,t.value},validateCode:function(e){var t=v["a"].validateCode(e);return this.ValidationCodeIsEager=t.eager,t.value},sendcode:function(){var e=this;if(this.Form.Phone&&"+7"!==this.Form.Phone){this.switchLoading();var t=this.Form.Phone.replace(/[^a-zA-Z0-9 ]|\s+/g,"");this.$store.dispatch(y["a"],t).then((function(){e.CodeSent=!0,e.setTimer()})).finally((function(){return e.switchLoading()}))}},login:function(){var e=this;if(this.Form.Phone&&this.Form.Code){this.switchLoading();var t=this.Form.Phone.replace(/[^a-zA-Z0-9 ]|\s+/g,""),n=this.Form.Code.replace(/-|\s+/g,"");this.$store.dispatch(y["d"],{Phone:t,Code:n}).then((function(){clearInterval(e.Timer),e.$router.replace(e.$route.query.redirect||"/")})).finally((function(){return e.switchLoading()}))}},resend:function(){this.setTimerAgain(180),this.sendcode()}}};P.render=h;t["default"]=P}}]);
//# sourceMappingURL=chunk-2d21e6fb.0bd223ad.js.map