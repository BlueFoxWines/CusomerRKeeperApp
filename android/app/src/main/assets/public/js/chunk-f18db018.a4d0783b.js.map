{"version":3,"sources":["webpack:///./src/views/Profile/Edit.vue","webpack:///./src/views/Profile/Edit.vue?291c","webpack:///./src/views/Profile/Edit.vue?118e"],"names":["class","type","slot","default-href","scroll-y","photos","length","photo","key","src","webviewPath","showActionSheet","saveProfile","Form","Name","name","rules","ValidationRules","as","field","errors","errorMessage","Object","keys","$t","placeholder","Phone","disabled","active","IsLoading","is-full-page","yup","string","components","IonPage","IonContent","IonBackButton","IonButtons","IonHeader","IonToolbar","Field","Loading","mixins","LoadingState","setup","useAvatar","takePhoto","deletePhoto","a","buttonsObj","text","i18n","global","t","handler","role","buttonDelete","value","create","mode","header","translucent","buttons","actionSheet","present","data","required","ensure","min","methods","render","__scopeId"],"mappings":"+OAUiBA,MAAM,a,GACFA,MAAM,W,SAOKA,MAAM,S,GAsBLA,MAAM,W,GAyBNA,MAAM,W,EAUf,eAAI,mB,GACCA,MAAM,W,GACCC,KAAK,SAASD,MAAM,gC,2VA5EpD,eAqFW,Q,WApFP,iBAMa,CANb,eAMa,Q,WALT,iBAIc,CAJd,eAIc,Q,WAHV,iBAEc,CAFd,eAEc,GAFDE,KAAK,SAAO,C,WACrB,iBAAgD,CAAhD,eAAgD,GAA/BC,eAAa,sB,0BAI1C,eA4Ec,GA5EAC,YAAU,EAAOJ,MAAM,e,YACjC,iBA0EM,CA1EN,eA0EM,MA1EN,EA0EM,CAzEF,eAwEM,MAxEN,EAwEM,CAvEc,EAAAK,OAAOC,OAAM,G,mBACzB,eAES,8BAFe,EAAAD,QAAM,SAAfE,G,wBAAf,eAES,UAFwBC,IAAKD,EAAOP,MAAM,S,CAC/C,eAAgG,OAA3FA,MAAM,4BAA6BS,IAAKF,EAAMG,YAAc,QAAK,mBAAE,EAAAC,gBAAgBJ,K,uDAI5F,eAES,SAFT,EAES,CADL,eAAyG,OAApGP,MAAM,4BAA4BS,IAAI,8BAA+B,QAAK,+BAAE,EAAAE,gBAAgB,EAAAJ,cAGzG,eA4DO,GA5DDP,MAAM,OAAQ,SAAQ,EAAAY,a,YACxB,iBAyBQ,CAzBR,eAyBQ,G,WAvBK,EAAAC,KAAKC,K,qDAAL,EAAAD,KAAKC,KAAI,IAClBC,KAAK,OACJC,MAAO,EAAAC,gBAAgBH,KACxBI,GAAG,MACHlB,MAAM,QACNC,KAAK,Q,YAEL,gBARUkB,EAQV,EARUA,MAAOC,EAQjB,EARiBA,OAAQC,EAQzB,EARyBA,aAQzB,MARqC,CAQrC,eAOQ,SAPDrB,MAAK,CAAC,QAAO,mBAA8BsB,OAAOC,KAAKH,GAAQd,U,CAClDgB,OAAOC,KAAKH,GAAQd,Q,iBAApC,eAEW,gB,8BADJe,GAAY,I,uBAEnB,eAEW,gB,8BADJ,EAAAG,GAAE,qC,SAGb,eAOM,MAPN,EAOM,CANF,eAKC,QALD,eACiB,GACbxB,MAAK,CAAC,QAAO,aACUsB,OAAOC,KAAKH,GAAQd,SAC1CmB,YAAa,EAAAD,GAAE,wC,8DAI5B,eAyBQ,G,WAvBK,EAAAX,KAAKa,M,qDAAL,EAAAb,KAAKa,MAAK,IACnBX,KAAK,QACLG,GAAG,MACHlB,MAAM,QACNC,KAAK,O,YAEL,gBAPUkB,EAOV,EAPUA,MAAOC,EAOjB,EAPiBA,OAAQC,EAOzB,EAPyBA,aAOzB,MAPqC,CAOrC,eAOQ,SAPDrB,MAAK,CAAC,QAAO,mBAA8BsB,OAAOC,KAAKH,GAAQd,U,CAClDgB,OAAOC,KAAKH,GAAQd,Q,iBAApC,eAEW,gB,8BADJe,GAAY,I,uBAEnB,eAEW,gB,8BADJ,EAAAG,GAAE,+C,SAGb,eAQM,MARN,EAQM,CAPF,eAMC,QAND,eACiB,GACbxB,MAAK,CAAC,QAAO,aACUsB,OAAOC,KAAKH,GAAQd,SAC1CmB,YAAa,EAAAD,GAAE,oCAChBG,SAAA,K,sDAIZ,EACA,eAIM,MAJN,EAIM,CAHF,eAES,SAFT,EAES,eADF,EAAAH,GAAE,+BAGb,eAAoD,GAA1CI,OAAQ,EAAAC,UAAYC,gBAAc,G,muCAoBpE,IAAIC,EAAM,CAAEC,OAAA,QAQI,GACZjB,KAAM,cACNkB,WAAY,CACRC,QAAA,OACAC,WAAA,OACAC,cAAA,OACAC,WAAA,OACAC,UAAA,OACAC,WAAA,OACAC,MAAA,OACA3B,KAAA,OACA4B,UAAA,MAEJC,OAAQ,CAACC,EAAA,MACTC,MAdY,WAcJ,MACuC,OAAAC,EAAA,QAAnCxC,EADJ,EACIA,OAAQyC,EADZ,EACYA,UAAWC,EADvB,EACuBA,YAErBpC,EAAc,6BAAI,WAAOJ,GAAP,mBAAAyC,EAAA,8DAChBC,EAAa,CACb,CACIC,KAAMC,EAAA,KAAKC,OAAOC,EAAE,wBACpBC,QAAS,WACLR,MAGR,CACII,KAAMC,EAAA,KAAKC,OAAOC,EAAE,2BACpBE,KAAM,WAGRC,EAAe,CACjBN,KAAMC,EAAA,KAAKC,OAAOC,EAAE,2BACpBE,KAAM,cACND,QAAS,WACLP,EAAYxC,KAIhBF,EAAOoD,MAAMnD,OAAS,IACtB2C,EAAS,YAAQA,GAAR,CAAoBO,KAtBb,SAyBM,OAAsBE,OAAO,CACnDC,KAAO,eAAW,WAAa,KAAO,MACtCC,OAAQ,eACRC,aAAa,EACbC,QAASb,IA7BO,cAyBdc,EAzBc,gBA+BdA,EAAYC,UA/BE,2CAAJ,sDAiCpB,MAAO,CACH3D,SACAyC,YACAnC,oBAGRsD,KAxDY,WAyDR,MAAO,CACHhD,gBAAiB,CACbH,KAAMiB,EAAIC,SAASkC,WAAWC,SAASC,IAAI,IAE/CvD,KAAM,CACFC,KAAM,KACNY,MAAO,QAInB2C,QAAS,CACLzD,YADK,WAED,eAAO,UAAW,yB,UC7K9B,EAAO0D,OAASA,EAChB,EAAOC,UAAY,kBAEJ,gB,kCCRf","file":"js/chunk-f18db018.a4d0783b.js","sourcesContent":["<template>\r\n    <ion-page>\r\n        <ion-header>\r\n            <ion-toolbar>\r\n                <ion-buttons slot=\"start\">\r\n                    <ion-back-button default-href=\"/main/profile\" />\r\n                </ion-buttons>\r\n            </ion-toolbar>\r\n        </ion-header>\r\n        <ion-content :scroll-y=\"false\" class=\"ion-padding\">\r\n            <div class=\"container\">\r\n                <div class=\"profile\">\r\n                    <template v-if=\"photos.length > 0\">\r\n                        <figure v-for=\"photo in photos\" :key=\"photo\" class=\"image\">\r\n                            <img class=\"profile-avatar is-rounded\" :src=\"photo.webviewPath\" @click=\"showActionSheet(photo)\">\r\n                        </figure>\r\n                    </template>\r\n                    <template v-else>\r\n                        <figure class=\"image\">\r\n                            <img class=\"profile-avatar is-rounded\" src=\"/assets/profile_default.png\" @click=\"showActionSheet(photo)\">\r\n                        </figure>\r\n                    </template>\r\n                    <Form class=\"form\" @submit=\"saveProfile\">\r\n                        <Field\r\n                            v-slot=\"{ field, errors, errorMessage }\"\r\n                            v-model=\"Form.Name\"\r\n                            name=\"Name\"\r\n                            :rules=\"ValidationRules.Name\"\r\n                            as=\"div\"\r\n                            class=\"field\"\r\n                            type=\"text\"\r\n                        >\r\n                            <label class=\"label\" :class=\"{ 'has-text-danger': Object.keys(errors).length }\">\r\n                                <template v-if=\"Object.keys(errors).length\">\r\n                                    {{ errorMessage }}\r\n                                </template>\r\n                                <template v-else>\r\n                                    {{ $t(\"Interface.Profile.Name.Label\") }}\r\n                                </template>\r\n                            </label>\r\n                            <div class=\"control\">\r\n                                <input\r\n                                    v-bind=\"field\"\r\n                                    class=\"input\"\r\n                                    :class=\"{ 'is-danger': Object.keys(errors).length }\"\r\n                                    :placeholder=\"$t('Interface.Profile.Name.Placeholder')\"\r\n                                >\r\n                            </div>\r\n                        </Field>\r\n                        <Field\r\n                            v-slot=\"{ field, errors, errorMessage }\"\r\n                            v-model=\"Form.Phone\"\r\n                            name=\"Phone\"\r\n                            as=\"div\"\r\n                            class=\"field\"\r\n                            type=\"tel\"\r\n                        >\r\n                            <label class=\"label\" :class=\"{ 'has-text-danger': Object.keys(errors).length }\">\r\n                                <template v-if=\"Object.keys(errors).length\">\r\n                                    {{ errorMessage }}\r\n                                </template>\r\n                                <template v-else>\r\n                                    {{ $t(\"Interface.Auth.Login.Phone.Placeholder\") }}\r\n                                </template>\r\n                            </label>\r\n                            <div class=\"control\">\r\n                                <input\r\n                                    v-bind=\"field\"\r\n                                    class=\"input\"\r\n                                    :class=\"{ 'is-danger': Object.keys(errors).length }\"\r\n                                    :placeholder=\"$t('Interface.Auth.Login.Phone.Label')\"\r\n                                    disabled\r\n                                >\r\n                            </div>\r\n                        </Field>\r\n                        <hr>\r\n                        <div class=\"control\">\r\n                            <button type=\"submit\" class=\"button is-theme is-fullwidth\">\r\n                                {{ $t(\"Interface.Button.Save\") }}\r\n                            </button>\r\n                        </div>\r\n                        <loading :active=\"IsLoading\" :is-full-page=\"true\" />\r\n                    </Form>\r\n                </div>\r\n            </div>\r\n        </ion-content>\r\n    </ion-page>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n    IonPage,\r\n    IonContent,\r\n    IonBackButton,\r\n    IonButtons,\r\n    IonHeader,\r\n    IonToolbar,\r\n    actionSheetController,\r\n    isPlatform\r\n} from \"@ionic/vue\"\r\nimport { string } from \"yup\"\r\nvar yup = { string }\r\nimport { Field, Form } from \"vee-validate\"\r\nimport notify from \"@/utils/Notifications\"\r\nimport { useAvatarPhoto } from \"@/composables/useAvatar\"\r\nimport LoadingState from \"@/mixins/LoadingState\"\r\nimport Loading from \"@/components/Loading.vue\"\r\nimport i18n from \"@/i18n\"\r\n\r\nexport default  {\r\n    name: \"ProfileEdit\",\r\n    components: {\r\n        IonPage,\r\n        IonContent,\r\n        IonBackButton,\r\n        IonButtons,\r\n        IonHeader,\r\n        IonToolbar,\r\n        Field,\r\n        Form,\r\n        Loading\r\n    },\r\n    mixins: [LoadingState],\r\n    setup() {\r\n        const { photos, takePhoto, deletePhoto } = useAvatarPhoto()\r\n\r\n        const showActionSheet = async (photo) => {\r\n            let buttonsObj = [\r\n                {\r\n                    text: i18n.global.t(\"Interface.Button.Add\"),\r\n                    handler: () => {\r\n                        takePhoto()\r\n                    }\r\n                },\r\n                {\r\n                    text: i18n.global.t(\"Interface.Button.Cancel\"),\r\n                    role: \"cancel\"\r\n                }\r\n            ]\r\n            const buttonDelete = {\r\n                text: i18n.global.t(\"Interface.Button.Delete\"),\r\n                role: \"destructive\",\r\n                handler: () => {\r\n                    deletePhoto(photo)\r\n                }\r\n            }\r\n\r\n            if (photos.value.length > 0) {\r\n                buttonsObj = [...buttonsObj, buttonDelete]\r\n            }\r\n\r\n            const actionSheet = await actionSheetController.create({\r\n                mode: (isPlatform(\"android\") ? \"md\" : \"ios\"),\r\n                header: \"Фото профиля\",\r\n                translucent: true,\r\n                buttons: buttonsObj\r\n            })\r\n            await actionSheet.present()\r\n        }\r\n        return {\r\n            photos,\r\n            takePhoto,\r\n            showActionSheet\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            ValidationRules: {\r\n                Name: yup.string().required().ensure().min(2)\r\n            },\r\n            Form: {\r\n                Name: null,\r\n                Phone: null\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        saveProfile() {\r\n            notify(\"warning\", \"Ещё не реализовано\")\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    .ion-page:before {\r\n        content: \"\";\r\n        position: absolute;\r\n        width: 100%;\r\n        height: 12rem;\r\n        left: 0px;\r\n        top: 0;\r\n        background-color: var(--color-beige2);\r\n        border-radius: 0px 0px 15px 15px;\r\n        z-index: 0;\r\n    }\r\n    ion-header,\r\n    ion-content {\r\n        background: transparent;\r\n        --background: transparent;\r\n    }\r\n</style>\r\n","import { render } from \"./Edit.vue?vue&type=template&id=550ea699&scoped=true\"\nimport script from \"./Edit.vue?vue&type=script&lang=js\"\nexport * from \"./Edit.vue?vue&type=script&lang=js\"\n\nimport \"./Edit.vue?vue&type=style&index=0&id=550ea699&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-550ea699\"\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Edit.vue?vue&type=style&index=0&id=550ea699&scoped=true&lang=css\""],"sourceRoot":""}