{"version":3,"sources":["webpack:///./src/views/Order/Index.vue","webpack:///./src/views/Order/Index.vue?2e33","webpack:///./src/mixins/LoadingState.js","webpack:///./src/components/Loading.vue","webpack:///./src/components/Loading.vue?2fa0","webpack:///./src/utils/Helpers.js"],"names":["class","translucent","$t","fullscreen","slot","getOrders","$event","IsAuthenticated","IsOrdersExist","to","$route","path","Orders","Order","key","Id","isFutureDateTime","StartDate","filterDateTime","OrderStatus","Products","length","src","active","IsLoading","is-full-page","name","components","IonContent","IonPage","IonHeader","IonToolbar","IonTitle","IonIcon","IonRefresher","IonRefresherContent","Loading","mixins","LoadingState","data","FirstUsage","computed","this","$store","getters","IS_AUTHENTICATED","IS_ORDER_LIST_NOT_EMPTY","state","List","ionViewWillEnter","methods","event","isRefreshAllowed","switchLoading","dispatch","then","target","complete","finally","params","refresh","datetime","Date","time","render","animation","isActive","displayInFullPage","cancel","model","prop","props","Boolean","programmatic","container","type","Object","Function","window","HTMLElement","default","isFullPage","String","canCancel","onCancel","watch","value","created","document","addEventListener","keyPress","beforeMount","$emit","appendChild","$el","body","mounted","beforeUnmount","removeEventListener","close","apply","arguments","setTimeout","$destroy","localeDateTime","options","year","month","day","timezone","hour","minute","toLocaleString","removeElement","el","remove","parentNode","removeChild"],"mappings":"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","file":"js/chunk-12897eac.85a1e992.js","sourcesContent":["<template>\n    <ion-page>\n        <ion-header translucent>\n            <ion-toolbar>\n                <ion-title>\n                    <h1 class=\"bluefox-title title\">\n                        {{ $t(\"Interface.Order.Title\") }}\n                    </h1>\n                </ion-title>\n            </ion-toolbar>\n        </ion-header>\n        <ion-content fullscreen class=\"ion-padding\">\n            <ion-refresher slot=\"fixed\" @ionRefresh=\"getOrders($event)\">\n                <ion-refresher-content />\n            </ion-refresher>\n            <div class=\"container has-text-centered\">\n                <p class=\"bluefox-text\">\n                    <template v-if=\"!IsAuthenticated && !IsOrdersExist\">\n                        {{ $t(\"Interface.Order.NotAuthenticated\") }}\n                        <router-link :to=\"{ name: 'Login', query: { redirect: $route.path } }\">\n                            {{ $t(\"Interface.Order.NotAuthenticatedLink\") }}\n                        </router-link>\n                    </template>\n                    <template v-else-if=\"IsAuthenticated && !IsOrdersExist\">\n                        {{ $t(\"Interface.Order.Empty\") }}\n                    </template>\n                </p>\n                <div v-if=\"IsOrdersExist\" class=\"control\">\n                    <router-link\n                        :to=\"{ name: 'Booking' }\"\n                        class=\"button is-theme is-outlined is-fullwidth\"\n                    >\n                        {{ $t(\"Interface.Order.Book\") }}\n                    </router-link>\n                    <br>\n                </div>\n                <ul v-if=\"IsOrdersExist\" class=\"orderslist\">\n                    <li v-for=\"Order in Orders\" :key=\"Order.Id\">\n                        <router-link :to=\"{ name: 'Order', params: { id: Order.Id } }\" class=\"orderslist-item columns is-multiline is-mobile\">\n                            <div class=\"column\">\n                                <div class=\"columns is-mobile\">\n                                    <div class=\"orderslist-item-title column\">\n                                        <template v-if=\"isFutureDateTime(Order.StartDate)\">\n                                            {{ $t(\"Interface.Order.DateTitle.Future\") }}\n                                        </template>\n                                        <template v-else>\n                                            {{ $t(\"Interface.Order.DateTitle.Past\") }}\n                                        </template>\n                                        {{ filterDateTime(Order.StartDate) }}\n                                    </div>\n                                    <div\n                                        class=\"orderslist-item-status column is-4\"\n                                        :class=\"{\n                                            'is-notpayed': Order.OrderStatus === 0,\n                                            'is-payed': Order.OrderStatus === 2,\n                                            'is-closed': Order.OrderStatus === 4\n                                        }\"\n                                    >\n                                        {{ $t('Interface.Order.Status.' + Order.OrderStatus) }}\n                                    </div>\n                                </div>\n                                <div class=\"orderslist-item-preview column is-half\">\n                                    <template v-if=\"Order.Products && Order.Products.length > 0\">\n                                        {{ Order.Products }}\n                                    </template>\n                                    <template v-else>\n                                        {{ $t(\"Interface.Order.Product.Booked\") }}\n                                    </template>\n                                </div>\n                            </div>\n                            <div class=\"orderslist-item-arrow column is-1\">\n                                <ion-icon src=\"assets/icon_arrow_right.svg\" />\n                            </div>\n                        </router-link>\n                    </li>\n                </ul>\n                <div class=\"control\">\n                    <hr>\n                    <router-link\n                        :to=\"{ name: 'Menu' }\"\n                        class=\"button is-theme is-fullwidth\"\n                    >\n                        {{ $t(\"Interface.Order.Preorder\") }}\n                    </router-link>\n                    <br>\n                    <router-link\n                        v-if=\"!IsOrdersExist\"\n                        :to=\"{ name: 'Booking' }\"\n                        class=\"button is-theme is-outlined is-fullwidth\"\n                    >\n                        {{ $t(\"Interface.Order.Book\") }}\n                    </router-link>\n                </div>\n            </div>\n        </ion-content>\n        <loading :active=\"IsLoading\" :is-full-page=\"true\" />\n    </ion-page>\n</template>\n\n<script>\nimport {\n    IonPage,\n    IonContent,\n    IonHeader,\n    IonToolbar,\n    IonTitle,\n    IonIcon,\n    IonRefresher,\n    IonRefresherContent\n} from \"@ionic/vue\"\nimport { localeDateTime } from \"@/utils/Helpers\"\nimport LoadingState from \"@/mixins/LoadingState\"\nimport Loading from \"@/components/Loading.vue\"\nimport {\n    ORDER_LIST_REQUEST\n} from \"@/store/actions/order\"\n\nexport default {\n    name: \"Orders\",\n    components: {\n        IonContent,\n        IonPage,\n        IonHeader,\n        IonToolbar,\n        IonTitle,\n        IonIcon,\n        IonRefresher,\n        IonRefresherContent,\n        Loading\n    },\n    mixins: [LoadingState],\n    data() {\n        return {\n            FirstUsage: true\n        }\n    },\n    computed: {\n        IsAuthenticated() {\n            return this.$store.getters.IS_AUTHENTICATED\n        },\n        IsOrdersExist() {\n            return this.$store.getters.IS_ORDER_LIST_NOT_EMPTY\n        },\n        Orders() {\n            return this.$store.state.Order.List\n        }\n    },\n    ionViewWillEnter() {\n        this.getOrders()\n    },\n    methods: {\n        getOrders(event) {\n            if (this.IsAuthenticated && this.isRefreshAllowed(event)) {\n                if (!event) this.switchLoading()\n                this.$store.dispatch(ORDER_LIST_REQUEST)\n                    .then(() => {\n                        this.FirstUsage = false\n                        if (event)\n                            event.target.complete()\n                    })\n                    .finally(() => {\n                        if (!event) this.switchLoading()\n                    })\n            }\n        },\n        isRefreshAllowed(event) {\n            if (event)\n                return true\n            if (this.$route.params.refresh)\n                return true\n            if (this.FirstUsage)\n                return true\n            else\n                return false\n        },\n        isFutureDateTime(datetime) {\n            return (new Date(datetime) > new Date())\n        },\n        filterDateTime(time) {\n            return localeDateTime(time)\n        }\n    }\n}\n</script>\n","import { render } from \"./Index.vue?vue&type=template&id=64308773\"\nimport script from \"./Index.vue?vue&type=script&lang=js\"\nexport * from \"./Index.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","export default {\n    data: () => ({\n        IsLoading: false\n    }),\n    methods: {\n        switchLoading() {\n            this.IsLoading = !this.IsLoading\n        }\n    }\n}\n","// fork from https://github.com/buefy/buefy/blob/dev/src/components/loading/Loading.vue\n\n<template>\n    <transition :name=\"animation\">\n        <div\n            v-if=\"isActive\"\n            class=\"loading-overlay is-active\"\n            :class=\"{ 'is-full-page': displayInFullPage }\"\n        >\n            <div class=\"loading-background\" @click=\"cancel\" />\n            <slot>\n                <div class=\"loading-icon\" />\n            </slot>\n        </div>\n    </transition>\n</template>\n\n<script>\nimport { removeElement } from \"@/utils/Helpers\"\n\nexport default {\n    name: \"BLoading\",\n    // deprecated, to replace with default 'value' in the next breaking change\n    model: {\n        prop: \"active\",\n        event: \"update:active\"\n    },\n    props: {\n        active: Boolean,\n        programmatic: Boolean,\n        container: {\n            type: [Object, Function, window.HTMLElement],\n            default: null\n        },\n        isFullPage: {\n            type: Boolean,\n            default: true\n        },\n        animation: {\n            type: String,\n            default: \"fade\"\n        },\n        canCancel: {\n            type: Boolean,\n            default: false\n        },\n        onCancel: {\n            type: Function,\n            default: () => {}\n        }\n    },\n    data() {\n        return {\n            isActive: this.active || false,\n            displayInFullPage: this.isFullPage\n        }\n    },\n    watch: {\n        active(value) {\n            this.isActive = value\n        },\n        isFullPage(value) {\n            this.displayInFullPage = value\n        }\n    },\n    created() {\n        if (typeof window !== \"undefined\") {\n            document.addEventListener(\"keyup\", this.keyPress)\n        }\n    },\n    beforeMount() {\n        // Insert the Loading component in body tag\n        // only if it's programmatic\n        if (this.programmatic) {\n            if (!this.container) {\n                document.body.appendChild(this.$el)\n            }\n            else {\n                this.displayInFullPage = false\n                this.$emit(\"update:is-full-page\", false)\n                this.container.appendChild(this.$el)\n            }\n        }\n    },\n    mounted() {\n        if (this.programmatic) this.isActive = true\n    },\n    beforeUnmount() {\n        if (typeof window !== \"undefined\") {\n            document.removeEventListener(\"keyup\", this.keyPress)\n        }\n    },\n    methods: {\n        /**\n        * Close the Modal if canCancel.\n        */\n        cancel() {\n            if (!this.canCancel || !this.isActive) return\n            this.close()\n        },\n        /**\n        * Emit events, and destroy modal if it's programmatic.\n        */\n        close() {\n            this.onCancel.apply(null, arguments)\n            this.$emit(\"close\")\n            this.$emit(\"update:active\", false)\n            // Timeout for the animation complete before destroying\n            if (this.programmatic) {\n                this.isActive = false\n                setTimeout(() => {\n                    this.$destroy()\n                    removeElement(this.$el)\n                }, 150)\n            }\n        },\n        /**\n        * Keypress event that is bound to the document.\n        */\n        keyPress({ key }) {\n            if (key === \"Escape\" || key === \"Esc\") this.cancel()\n        }\n    }\n}\n</script>\n","import { render } from \"./Loading.vue?vue&type=template&id=fec6e284\"\nimport script from \"./Loading.vue?vue&type=script&lang=js\"\nexport * from \"./Loading.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","/*\n    Helpers library by Anton Zolotov (antonzolotov@outlook.com)\n*/\n\nexport function checkToken(value) {\n    if (window.$cookies.get(\"ExpirationDate\")) {\n        const expire = new Date(window.$cookies.get(\"ExpirationDate\"))\n        const now = new Date()\n        if (now.getTime() < expire.getTime()) {\n            if (value === \"AuthToken\") return window.$cookies.get(\"AuthToken\")\n            if (value === \"ExpirationDate\") return window.$cookies.get(\"ExpirationDate\")\n            return null\n        }\n\n        window.$cookies.remove(\"AuthToken\")\n        window.$cookies.remove(\"ExpirationDate\")\n        return null\n    }\n    return null\n}\n\nexport function getCurrentLanguage() {\n    // if (window.$cookies.isKey(\"Language\") && window.$cookies.get(\"Language\").code) {\n    //     return window.$cookies.get(\"Language\").code.substr(0, 2)\n    // }\n    if (navigator.language) {\n        return navigator.language.substr(0, 2)\n    }\n    return process.env.VUE_APP_I18N_LOCALE\n}\n\nexport function filterDateTime(date, direction = true) {\n    const DefaultDate = new Date(date)\n    const UserTimezoneOffset = DefaultDate.getTimezoneOffset() * 60000\n    const Result = (direction) ? DefaultDate.getTime() - UserTimezoneOffset : DefaultDate.getTime() + UserTimezoneOffset\n    return new Date(Result)\n}\n\nexport function localeDateTime(time) {\n    const options = {\n        year: \"numeric\",\n        month: \"numeric\",\n        day: \"numeric\",\n        timezone: \"UTC\",\n        hour: \"numeric\",\n        minute: \"numeric\"\n    }\n    return new Date(time).toLocaleString(\"ru\", options)\n}\n\nexport function isObjectEmpty(obj) {\n    return Object.keys(obj).length === 0 && obj.constructor === Object\n}\n\nexport function removeElement(el) {\n    if (typeof el.remove !== \"undefined\") {\n        el.remove()\n    }\n    else if (typeof el.parentNode !== \"undefined\" && el.parentNode !== null) {\n        el.parentNode.removeChild(el)\n    }\n}\n"],"sourceRoot":""}