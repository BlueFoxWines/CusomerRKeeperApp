{"version":3,"sources":["webpack:///./src/views/Profile/Edit.vue","webpack:///./src/views/Profile/Edit.vue?d0b9"],"names":["class","src","type","slot","default-href","fullscreen","scroll-y","photos","length","photo","key","showActionSheet","webviewPath","saveProfile","Form","Name","name","rules","ValidationRules","as","field","errors","errorMessage","Object","keys","$t","placeholder","Phone","disabled","logout","active","IsLoading","is-full-page","yup","string","components","IonPage","IonContent","IonBackButton","IonButtons","IonIcon","IonHeader","IonToolbar","Field","Loading","mixins","LoadingState","setup","useAvatar","takePhoto","deletePhoto","a","buttonsObj","text","i18n","global","t","handler","role","buttonDelete","value","create","mode","header","translucent","buttons","actionSheet","present","data","required","ensure","min","methods","this","$store","dispatch","render"],"mappings":"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","file":"js/chunk-2d0e2110.79d5251c.js","sourcesContent":["<template>\n    <ion-page>\n        <ion-header>\n            <ion-toolbar>\n                <ion-buttons slot=\"start\">\n                    <ion-back-button default-href=\"/main/profile\" />\n                </ion-buttons>\n            </ion-toolbar>\n        </ion-header>\n        <ion-content fullscreen :scroll-y=\"false\" class=\"ion-padding\">\n            <div class=\"container\">\n                <div class=\"profile\">\n                    <template v-if=\"photos.length > 0\">\n                        <figure v-for=\"photo in photos\" :key=\"photo\" class=\"image\" @click=\"showActionSheet(photo)\">\n                            <img class=\"profile-avatar is-rounded\" :src=\"photo.webviewPath\">\n                            <div class=\"profile-photoicon\">\n                                <ion-icon src=\"assets/icon_photo.svg\" />\n                            </div>\n                        </figure>\n                    </template>\n                    <template v-else>\n                        <figure class=\"image\" @click=\"showActionSheet(photo)\">\n                            <img class=\"profile-avatar is-rounded\" src=\"/assets/profile_default.png\">\n                            <div class=\"profile-photoicon\">\n                                <ion-icon src=\"assets/icon_photo.svg\" />\n                            </div>\n                        </figure>\n                    </template>\n                    <Form class=\"form\" @submit=\"saveProfile\">\n                        <Field\n                            v-slot=\"{ field, errors, errorMessage }\"\n                            v-model=\"Form.Name\"\n                            name=\"Name\"\n                            :rules=\"ValidationRules.Name\"\n                            as=\"div\"\n                            class=\"field\"\n                            type=\"text\"\n                        >\n                            <label class=\"label\" :class=\"{ 'has-text-danger': Object.keys(errors).length }\">\n                                <template v-if=\"Object.keys(errors).length\">\n                                    {{ errorMessage }}\n                                </template>\n                                <template v-else>\n                                    {{ $t(\"Interface.Profile.Name.Label\") }}\n                                </template>\n                            </label>\n                            <div class=\"control\">\n                                <input\n                                    v-bind=\"field\"\n                                    class=\"input\"\n                                    :class=\"{ 'is-danger': Object.keys(errors).length }\"\n                                    :placeholder=\"$t('Interface.Profile.Name.Placeholder')\"\n                                >\n                            </div>\n                        </Field>\n                        <Field\n                            v-slot=\"{ field, errors, errorMessage }\"\n                            v-model=\"Form.Phone\"\n                            name=\"Phone\"\n                            as=\"div\"\n                            class=\"field\"\n                            type=\"tel\"\n                        >\n                            <label class=\"label\" :class=\"{ 'has-text-danger': Object.keys(errors).length }\">\n                                <template v-if=\"Object.keys(errors).length\">\n                                    {{ errorMessage }}\n                                </template>\n                                <template v-else>\n                                    {{ $t(\"Interface.Auth.Login.Phone.Placeholder\") }}\n                                </template>\n                            </label>\n                            <div class=\"control\">\n                                <input\n                                    v-bind=\"field\"\n                                    class=\"input\"\n                                    :class=\"{ 'is-danger': Object.keys(errors).length }\"\n                                    :placeholder=\"$t('Interface.Auth.Login.Phone.Label')\"\n                                    disabled\n                                >\n                            </div>\n                        </Field>\n                        <hr>\n                        <div class=\"control\">\n                            <button type=\"submit\" class=\"button is-theme is-fullwidth\">\n                                {{ $t(\"Interface.Button.Save\") }}\n                            </button>\n                        </div>\n                        <br>\n                        <p class=\"profile-logout\" @click=\"logout()\">Выйти из профиля</p>\n                        <loading :active=\"IsLoading\" :is-full-page=\"true\" />\n                    </Form>\n                </div>\n            </div>\n        </ion-content>\n    </ion-page>\n</template>\n\n<script>\nimport {\n    IonPage,\n    IonContent,\n    IonBackButton,\n    IonButtons,\n    IonIcon,\n    IonHeader,\n    IonToolbar,\n    actionSheetController,\n    isPlatform\n} from \"@ionic/vue\"\nimport { string } from \"yup\"\nvar yup = { string }\nimport { Field, Form } from \"vee-validate\"\nimport notify from \"@/utils/Notifications\"\nimport { useAvatarPhoto } from \"@/composables/useAvatar\"\nimport LoadingState from \"@/mixins/LoadingState\"\nimport Loading from \"@/components/Loading.vue\"\nimport i18n from \"@/i18n\"\nimport { LOGOUT } from \"@/store/actions/auth\"\n\nexport default  {\n    name: \"ProfileEdit\",\n    components: {\n        IonPage,\n        IonContent,\n        IonBackButton,\n        IonButtons,\n        IonIcon,\n        IonHeader,\n        IonToolbar,\n        Field,\n        Form,\n        Loading\n    },\n    mixins: [LoadingState],\n    setup() {\n        const { photos, takePhoto, deletePhoto } = useAvatarPhoto()\n\n        const showActionSheet = async (photo) => {\n            let buttonsObj = [\n                {\n                    text: i18n.global.t(\"Interface.Button.Add\"),\n                    handler: () => {\n                        takePhoto()\n                    }\n                },\n                {\n                    text: i18n.global.t(\"Interface.Button.Cancel\"),\n                    role: \"cancel\"\n                }\n            ]\n            const buttonDelete = {\n                text: i18n.global.t(\"Interface.Button.Delete\"),\n                role: \"destructive\",\n                handler: () => {\n                    deletePhoto(photo)\n                }\n            }\n\n            if (photos.value.length > 0) {\n                buttonsObj = [...buttonsObj, buttonDelete]\n            }\n\n            const actionSheet = await actionSheetController.create({\n                mode: (isPlatform(\"android\") ? \"md\" : \"ios\"),\n                header: \"Фото профиля\",\n                translucent: true,\n                buttons: buttonsObj\n            })\n            await actionSheet.present()\n        }\n        return {\n            photos,\n            takePhoto,\n            showActionSheet\n        }\n    },\n    data() {\n        return {\n            ValidationRules: {\n                Name: yup.string().required().ensure().min(2)\n            },\n            Form: {\n                Name: null,\n                Phone: null\n            }\n        }\n    },\n    methods: {\n        saveProfile() {\n            notify(\"warning\", \"Ещё не реализовано\")\n        },\n        logout() {\n            this.$store.dispatch(LOGOUT)\n        }\n    }\n}\n</script>\n","import { render } from \"./Edit.vue?vue&type=template&id=daa27be6\"\nimport script from \"./Edit.vue?vue&type=script&lang=js\"\nexport * from \"./Edit.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}